<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Kees Sommer</title>
        <style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100&display=swap');            :root {
                --baseBlockSize: 0px;
                --baseBorderWidth: calc(var(--baseBlockSize) / 10);
                --baseMargin: calc((var(--baseBlockSize) + var(--baseBorderWidth) * 2) / -2);
                --hoverScale: 1.05;
                --expandScale: 1;
                --backgroundColor: #7D888E;
                --circleBorderColor: #a6afb4;
                --circleBackgroundColor: var(--circleBorderColor);
                --textColor: #E8EAE1;
                --overlayColor: #191f22;
                --overlayOpacity: 0.9;
                --mainLogoBackgroundColor: var(--backgroundColor);
                --mouseDownScale: 0.95;
                --longTransitionTime: 2s;
                --mediumTansitionTime: 1s;
                --fastTransitionTime: 0.3s;
                --popOutBezier: cubic-bezier(0.8, -0.44, 0.62, 1.01);
                --popInBezier:cubic-bezier(0.65, 0.13, 0.2, 1.38);

                --sub1DownGoalX: -20vw;
                --sub1DownGoalY: calc(40vh - (20vw - 10vh));
            }

            html, body {
                height: 100%;
                font-family: 'Montserrat', sans-serif;
                max-width: 100%;
                overflow-x: hidden;
            }
            
            body {
                margin: 0;
                background-color: var(--backgroundColor);
            }

            h1 {
                font-size: 22pt;
                color: var(--textColor);
                line-height: 10pt;
                text-align: center;
                white-space: nowrap;
            }

            h2 {
                font-size: 14pt;
                color: var(--textColor);
                line-height: 4pt;
                text-align: center;
                white-space: nowrap;
            }

            h2.subBlockHeading {
                position: absolute;
                transition: var(--mediumTansitionTime);
                opacity: 0;
                left: 50%;
                transform: translate(-50%, calc(var(--baseBlockSize) * 0.6));
                z-index: -1;
            }

            h2.subBlockHeading.visibleHeading {
                opacity: 1;
            }

            h3 {
                text-align: center;
                position: absolute;
                transform: translateY(calc(var(--baseBlockSize) * -0.235));
                font-size: 7pt;
                color: var(--overlayColor);
                opacity: 0;
                transition: var(--longTransitionTime);
            }

            p {
                position: absolute;
                font-size: 3pt;
                color: var(--textColor);
                max-width: calc(var(--baseBlockSize) * 0.9);
                text-align: center;
                opacity: 0;
            }

            a:link {
                color: #9dc9e5;
            }

            a:visited {
                color: #9dc9e5;
            }

            iframe {
                position: absolute; 
                transform: translateY(calc(var(--baseBlockSize) * 0.25));
                visibility: hidden;
                opacity: 0;
                transition: var(--longTransitionTime);
            }

            iframe.visibleFrame {
                visibility: visible;
                opacity: 1;
            }

            .mainInfo {
                text-align: center;
                position: absolute;
                top: calc(50% + var(--baseBlockSize) * 1.1);
                left: 50%;
                transform: translate(-50%, -50%);
            }

            .overlay {
                background-color: var(--overlayColor);
                opacity: 0;
                position: absolute; 
                width: var(--baseBlockSize); 
                height: calc(var(--baseBlockSize) * 0.7);
                transform: translateY(calc(var(--baseBlockSize) * 0.18));
                transition: var(--mediumTansitionTime);
            }

            .semiOpaque {
                opacity: var(--overlayOpacity);
            }

            .fullyOpaque {
                opacity: 1;
            }

            .container {
                height: 100%;
                position: relative;
                z-index: 0;
            }

            .visual {
                transition: var(--longTransitionTime);
                margin: var(--baseMargin) 0 0 var(--baseMargin);
                width: var(--baseBlockSize);
                height: var(--baseBlockSize);
                background:var(--circleBackgroundColor);
                border-radius: 50%;
                border-width: var(--baseBorderWidth);
                border-color: var(--circleBorderColor);
                border-style: solid;
                overflow: hidden;
                background-size: calc(var(--baseBlockSize) * 0.75);
                background-position: center;
                background-repeat: no-repeat;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .visual.hoverable:hover:not(.visual.expanded) {
                transform: scale(var(--hoverScale));
                transition: var(--fastTransitionTime);
            }

            .visual.hoverable:active:not(.visual.expanded) {
                transform: scale(var(--mouseDownScale));
                transition: var(--fastTransitionTime);
            }

            .visual.expanded {
                z-index: 2;
                transform: scale(var(--expandScale)) translate(-0.5vh, 4vh);
                transition: transform 
                var(--mediumTansitionTime) var(--popInBezier);
            }

            .block {
                position: absolute;
                top: 50%;
                left: 50%;
                user-select: none;
                -moz-user-select: none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                -o-user-select: none;
                z-index: 0;
            }

            .block.sub1 {
                transition: transform 
                var(--mediumTansitionTime) 
                var(--popOutBezier);
            }

            .block.sub2 {
                transition: transform 
                var(--mediumTansitionTime)
                var(--popInBezier);
            }

            .block.main {
                z-index: 1;
                background-color: var(--mainLogoBackgroundColor);
                border-color: var(--circleBorderColor);
            }

            .block.popOut {
                transition: transform 
                var(--mediumTansitionTime) 
                var(--popInBezier);
            }

            .block.sub1Down {
                transform: translate(var(--sub1DownGoalX), var(--sub1DownGoalY));
            }

            .block.sub1Left {
                transform: translate(3vw, max(-28vh, -50vh + var(--baseBlockSize)));
            }

            .block.sub1Right {
                transform: translate(20vw, calc(37vh - 5vw));
            }

            .block.sub2DownDown {
                transform: translateX(-22vw) translateY(calc(20vh - 10vw));
            }

            .block.sub2DownLeft {
                transform: translateX(-10vw) translateY(calc(-12vh - 10vw));
            }

            .block.sub2DownRight {
                transform: translateX(10vw) translateY(calc(40vh - 30vw));
            }

            .logo {
                margin-left: 10px;
                margin-right: 10px;
            }

        </style>
    </head>
    <body>
        <div class="container">

            <div class="block sub1 mainLevel" id="sub1Down">
                <div class="block sub2" 
                id="sub2DownDown">
                    <div class="block visual" 
                    onclick="clickPopOutBlock(event)"
                    style="background-image: url('images/cootSim.png');
                    background-size: 200%;">
                        <h3>coot simulator</h3>
                        <div class="overlay"></div>
                        <p>
                            <i>coot simulator</i> is a minimalist simulation of 
                            the life of a eurasian coot. Available 
                            <a href="https://keessommer.itch.io/coot-simulator" 
                            target="_blank">here</a>.
                        </p>
                        <iframe width="50" height="30" 
                        src="https://www.youtube.com/embed/-cQPzXvLpys" 
                        title="YouTube video player" frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; 
                        encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen></iframe>                
                    </div>
                    <h2 class="subBlockHeading sub2Heading">coot simulator</h2>
                </div>                

                <div class="block sub2" id="sub2DownLeft">
                    <div class="block visual" 
                    onclick="clickPopOutBlock(event)"
                    style="background-image: url('images/pixlands.png');
                    background-size: 100%;">
                        <h3>pixlands!</h3>
                        <div class="overlay"></div>
                        <p>
                            <i>pixlands!</i> is a lo-fi terrain simulation,
                            created entirely using an html table.
                            Available <a href="https://keessommer.github.io/pixlands/" target="_blank">here</a>.
                        </p>
                        <iframe width="50" height="30" 
                        src="https://www.youtube.com/embed/_AJjrSWZurw" 
                        title="YouTube video player" frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; 
                        encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen></iframe>

                        </div>
                    <h2 class="subBlockHeading sub2Heading">pixlands!</h2>
                </div>

                <div class="block sub2" id="sub2DownRight">
                    <div class="block visual" 
                    onclick="clickPopOutBlock(event)"
                    style="background-image: url('images/more.png');
                    background-size: 200%;">
                        <h3 style="color: var(--textColor);">\MORE</h3>
                        <div class="overlay"></div>
                        <p>
                            <i>\MORE</i> is an experimental text adventure game,
                            played entirely using the terminal and console command <i>more</i>.
                            Available <a href="https://keessommer.itch.io/more" target="_blank">here</a>.
                        </p>
                        <!-- <img src="images/more.png" style="height: 10px"> -->
                        </div>
                    <h2 class="subBlockHeading sub2Heading">\MORE</h2>
                </div>

                <div class="block sub1" id="sub1DownMain">
                    <div class="block visual" 
                    id="sub1DownVisual" 
                    onclick="clickSub1Block(event)"
                    style="background-image: url('images/cootSim.png'); background-size: 200%;">
                    </div>
                </div>
                <h2 class="subBlockHeading sub1Heading">available</h2>
            </div>

            <div class="block sub1 mainLevel" id="sub1Left">
                <div class="block sub1" id="sub1LeftMain">
                    <div class="block visual" 
                    id="sub1LeftVisual"
                    onclick="clickPopOutBlock(event)"
                    style="background-image: url('images/byConstellation.jpg');
                    background-size: 200%;">
                        <h3>by constellation</h3>
                        <div class="overlay"></div>
                        <p>
                            <i>by constellation</i> is an upcoming first 
                            person puzzle game where players connect orbs to travel through a serene world.
                        </p>
                        <iframe width="50" height="30" 
                        src="https://www.youtube.com/embed/1FOU2Ajxvok" 
                        title="YouTube video player" 
                        frameborder="0" 
                        allow="autoplay; modestbranding" 
                        allowfullscreen></iframe>                   
                    </div>
                </div>
                <h2 class="subBlockHeading sub1Heading">upcoming</h2>
            </div>

            <div class="block sub1" id="sub1Right">
                <div class="block sub1" id="sub1RightMain">
                    <div class="block visual" 
                    id="sub1RightVisual" 
                    onclick="clickSub1Block(event)"></div>
                </div>
                <h2 class="subBlockHeading sub1Heading">archived</h2>
            </div>

            <div class="block visual main" 
            id="mainBlock"
            onclick="clickMainBlock()">
                <img src="images/logo.svg" style="width: calc(var(--baseBlockSize) * 0.9)">
            </div>
            <div class="mainInfo" onclick="clickMainBlock()">
                <br><br><br><br>
                <h2>click or tap</h2>
                <br>
                <h1>Kees Sommer</h1>
                <h2>full stack & game dev</h2>
                <br>
                <a class="logo" href="https://www.instagram.com/keessommer/" target="_blank"><img src="images/ig-logo-black.svg"></a>
                <a class="logo" href="https://keessommer.itch.io/" target="_blank"><img src="images/itchio-textless-black.svg"></a>
                <a class="logo" href="https://keessommer.tumblr.com/" target="_blank"><img src="images/Tumblr_Logos_2018.03.06.svg" style="height: 20px"></a>
            </div>
        </div>
    </body>
    <script>
        const  clickMainBlock = () => {
            document.querySelectorAll('.sub1')
            .forEach(e => {
                e.classList.toggle(e.id);
                e.classList.toggle('popOut');
                const label = e.querySelector('h2.sub1Heading');
                if (label){
                    label.classList.toggle('visibleHeading');
                }
                const subLabels = e.querySelectorAll('h2.sub2Heading');
                if (subLabels){
                    subLabels.forEach( e => e.classList.remove('visibleHeading'));
                }
            });
            document.querySelectorAll('.sub2')
            .forEach(e => e.classList.remove(e.id));
        };

        const clickSub1Block = (event) => {
            const targetContainer = event.target.parentNode.parentNode.id;
            document.getElementById(targetContainer).querySelectorAll('.sub2')
            .forEach(e => {
                e.classList.toggle(e.id);
                e.classList.toggle('popOut');
                const label = e.querySelector('h2.sub2Heading');
                if (label){
                    label.classList.toggle('visibleHeading');
                }
            });
        };

        const toggleExpansion = (target) => {
            target.classList.toggle('expanded');
            target.classList.remove('hoverable');
            target.querySelector(".overlay").classList.toggle('semiOpaque');
            target.querySelector("h3").classList.toggle('semiOpaque');
            target.querySelector("p").classList.toggle('fullyOpaque');
            const videoPlayer = target.querySelector("iframe");
            if (videoPlayer){
                const videoPlayerSource = videoPlayer.src;
                videoPlayer.src = videoPlayerSource;
                videoPlayer.classList.toggle('visibleFrame');
            }
            if (Array.from(target.classList).includes('expanded')){
                target.parentNode.style.zIndex = 2;
                target.closest('.mainLevel').style.zIndex = 2;
            } else {
                target.parentNode.style.zIndex = 0;
                target.closest('.mainLevel').style.zIndex = 0;
            }
        };

        const unexpandAll = () => {
            const expandedElement = document.querySelector('.expanded');
            if (expandedElement){
                toggleExpansion(expandedElement);
            }
        }

        const clickPopOutBlock = (event) => {
            const visualContainer = event.target.closest('.visual');
            if (!Array.from(visualContainer.classList).includes('expanded')){
                unexpandAll();
            }
            toggleExpansion(visualContainer)
        };

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.expanded')){
                unexpandAll();
            }
        });

        Array.from(document.querySelectorAll('.visual')).forEach(
            e => {
                e.classList.add('hoverable');
                e.addEventListener('transitionend', () => e.classList.add('hoverable'));
            });

        const baseBlockSize = 100;
        document.documentElement.style.setProperty('--baseBlockSize', `${baseBlockSize}px`);
        
        const updateScaling = () => {
            const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
            const trimmedVw = Math.max(500, Math.min(800, vw));
            document.documentElement.style.setProperty('--expandScale', trimmedVw * 0.7 / baseBlockSize);
        };
        updateScaling();
        window.addEventListener('resize', (event) => updateScaling() );
    </script>
</html>